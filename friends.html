<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/3/w3.css">
	<title></title>
	<style type="text/css">
		.user-div {
 			display: inline-block;
  			padding: 10px;
  			background-color: aqua;
  			margin: 2px;
  			cursor: pointer;
		}

		h2 {
			text-align: center;

		}
	</style>
</head>
<body>

	<div id="headline">
		<h2><b>Click to see their friends</b></h2>
	</div>
	<div id="userContainer" style="margin: 100px 50px 0px 50px"></div>
	<div style="margin: 25px 0px 0px 50px"><b>Direct friends:</b></div>
	<div id="usersFriends" style="margin: 5px 0px 0px 50px">
	</div>
	<div style="margin: 25px 0px 0px 50px"><b>Friends of friends:</b></div>
	<div id="usersFriendsOfFriends" style="margin: 5px 0px 0px 50px">
	</div>

	<script type="text/javascript">
		
		var users = [
		  {
		    "id": 1,
		    "firstName": "Paul",
		    "surname": "Crowe",
		    "age": 28,
		    "gender": "male",
		    "friends": [
		      2
		    ]
		  },
		  {
		    "id": 2,
		    "firstName": "Rob",
		    "surname": "Fitz",
		    "age": 23,
		    "gender": "male",
		    "friends": [
		      1,
		      3
		    ]
		  },
		  {
		    "id": 3,
		    "firstName": "Ben",
		    "surname": "O'Carolan",
		    "age": null,
		    "gender": "male",
		    "friends": [
		      2,
		      4,
		      5,
		      7
		    ]
		  },
		  {
		    "id": 4,
		    "firstName": "Victor",
		    "surname": "",
		    "age": 28,
		    "gender": "male",
		    "friends": [
		      3
		    ]
		  },
		  {
		    "id": 5,
		    "firstName": "Peter",
		    "surname": "Mac",
		    "age": 29,
		    "gender": "male",
		    "friends": [
		      3,
		      6,
		      11,
		      10,
		      7
		    ]
		  },
		  {
		    "id": 6,
		    "firstName": "John",
		    "surname": "Barry",
		    "age": 18,
		    "gender": "male",
		    "friends": [
		      5
		    ]
		  },
		  {
		    "id": 7,
		    "firstName": "Sarah",
		    "surname": "Lane",
		    "age": 30,
		    "gender": "female",
		    "friends": [
		      3,
		      5,
		      20,
		      12,
		      8
		    ]
		  },
		  {
		    "id": 8,
		    "firstName": "Susan",
		    "surname": "Downe",
		    "age": 28,
		    "gender": "female",
		    "friends": [
		      7
		    ]
		  },
		  {
		    "id": 9,
		    "firstName": "Jack",
		    "surname": "Stam",
		    "age": 28,
		    "gender": "male",
		    "friends": [
		      12
		    ]
		  },
		  {
		    "id": 10,
		    "firstName": "Amy",
		    "surname": "Lane",
		    "age": 24,
		    "gender": "female",
		    "friends": [
		      5,
		      11
		    ]
		  },
		  {
		    "id": 11,
		    "firstName": "Sandra",
		    "surname": "Phelan",
		    "age": 28,
		    "gender": "female",
		    "friends": [
		      5,
		      10,
		      19,
		      20
		    ]
		  },
		  {
		    "id": 12,
		    "firstName": "Laura",
		    "surname": "Murphy",
		    "age": 33,
		    "gender": "female",
		    "friends": [
		      7,
		      9,
		      13,
		      20
		    ]
		  },
		  {
		    "id": 13,
		    "firstName": "Lisa",
		    "surname": "Daly",
		    "age": 28,
		    "gender": "female",
		    "friends": [
		      12,
		      14,
		      20
		    ]
		  },
		  {
		    "id": 14,
		    "firstName": "Mark",
		    "surname": "Johnson",
		    "age": 28,
		    "gender": "male",
		    "friends": [
		      13,
		      15
		    ]
		  },
		  {
		    "id": 15,
		    "firstName": "Seamus",
		    "surname": "Crowe",
		    "age": 24,
		    "gender": "male",
		    "friends": [
		      14
		    ]
		  },
		  {
		    "id": 16,
		    "firstName": "Daren",
		    "surname": "Slater",
		    "age": 28,
		    "gender": "male",
		    "friends": [
		      18,
		      20
		    ]
		  },
		  {
		    "id": 17,
		    "firstName": "Dara",
		    "surname": "Zoltan",
		    "age": 48,
		    "gender": "male",
		    "friends": [
		      18,
		      20
		    ]
		  },
		  {
		    "id": 18,
		    "firstName": "Marie",
		    "surname": "D",
		    "age": 28,
		    "gender": "female",
		    "friends": [
		      17
		    ]
		  },
		  {
		    "id": 19,
		    "firstName": "Catriona",
		    "surname": "Long",
		    "age": 28,
		    "gender": "female",
		    "friends": [
		      11,
		      20
		    ]
		  },
		  {
		    "id": 20,
		    "firstName": "Katy",
		    "surname": "Couch",
		    "age": 28,
		    "gender": "female",
		    "friends": [
		      7,
		      11,
		      12,
		      13,
		      16,
		      17,
		      19
		    ]
		  }
		];
		//CODE
		var formatedUsers = [];
		for(var i = 0; i < users.length; i++) {
		  var eachUser = {};
		  eachUser.id = users[i].id;
		  eachUser.name = users[i].firstName + " " + users[i].surname;
		  eachUser.friends = [];
		  eachUser.friendsOfFriends = [];
		  for(var j = 0; j < users.length; j++) {
		    if(users[j]['friends'].indexOf(eachUser.id) != -1) {
		      eachUser['friends'].push(users[j].firstName + " " + users[j].surname);
		      for(var z = 0; z < users.length; z++) {
		        if(users[j]['friends'].indexOf(users[z]['id']) != -1 && eachUser.id != users[z]['id']) {
		        	if(eachUser.friendsOfFriends.includes(users[z].firstName + " " + users[z].surname) == false){
		          eachUser.friendsOfFriends.push(users[z].firstName + " " + users[z].surname);
		      		}
		        }
		      }
		    }
		  }
		  formatedUsers.push(eachUser);
		}
		//Formatirani su svi korisnici, sad izlistavanje
		var userInfoContainer = $('#usersFriends');
		var usersFriendsOfFriends = $('#usersFriendsOfFriends');
		var userContainer = document.getElementById("userContainer");
		for(var i = 0; i < formatedUsers.length; i++) {
		  var eachUser = document.createElement("div");
		  eachUser.className += "user-div";
		  eachUser.setAttribute('data-id', formatedUsers[i].id);
		  var eachUserLinkName = document.createTextNode(formatedUsers[i].name);
		  eachUser.appendChild(eachUserLinkName);
		  userContainer.appendChild(eachUser);
		}
		$(document).ready(function(){
		  $('.user-div').on('click', function(){
		    var userInfo = formatedUsers[$(this).data('id') - 1];
		    var userFriendsText = "";
		    for(var i = 0; i < userInfo.friends.length; i++) {
		      userFriendsText += userInfo.friends[i] + ",";
		    }
		    userInfoContainer.text(userFriendsText);
		    
		    var userFriendsOfFriendsText = "";
		    for(var i = 0; i < userInfo.friendsOfFriends.length; i++) {
		      userFriendsOfFriendsText += userInfo.friendsOfFriends[i] + ",";
		    }
		    usersFriendsOfFriends.text(userFriendsOfFriendsText);
		  });
		});



	</script>

</body>
</html>